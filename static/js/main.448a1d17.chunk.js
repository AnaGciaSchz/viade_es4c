(this.webpackJsonpviade_es4c=this.webpackJsonpviade_es4c||[]).push([[0],{1001:function(e,t){},1003:function(e,t){},1043:function(e,t){},1045:function(e,t){},1080:function(e,t,n){},1081:function(e,t,n){},1082:function(e,t,n){},1083:function(e,t,n){},1084:function(e,t,n){},1085:function(e,t,n){},1086:function(e,t,n){},1087:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"documentExists",(function(){return ne})),n.d(r,"createDoc",(function(){return re})),n.d(r,"deleteFile",(function(){return ae})),n.d(r,"createDocument",(function(){return ce})),n.d(r,"createDocumentWithTurtle",(function(){return ie})),n.d(r,"createNonExistentDocument",(function(){return oe})),n.d(r,"fetchLdflexDocument",(function(){return se})),n.d(r,"resourceExists",(function(){return ue})),n.d(r,"discoverInbox",(function(){return le})),n.d(r,"getLinkedInbox",(function(){return me}));var a={};n.r(a),n.d(a,"checkSpecificAppPermission",(function(){return he})),n.d(a,"checkPermissions",(function(){return de})),n.d(a,"checkOrSetInboxAppendPermissions",(function(){return fe}));var c={};n.r(c),n.d(c,"fetchNotifications",(function(){return ge})),n.d(c,"fetchNotification",(function(){return we})),n.d(c,"sendNotification",(function(){return xe})),n.d(c,"findUserInboxes",(function(){return ye})),n.d(c,"getDefaultInbox",(function(){return Oe})),n.d(c,"addRouteSharedWithMe",(function(){return je})),n.d(c,"markAsRead",(function(){return ke}));var i=n(0),o=n.n(i),s=n(58),u=n.n(s),l=(n(552),n(553),n(554),n(45)),m=n(131),p=n(533),h=(n(555),n(246)),d=n(102),f=n(39),v=n(1097),b=n(170),E=n(36),g=n(112),w=n(130),x=n(52),y=n(10),O=n(13),j=function(){function e(){Object(y.a)(this,e)}return Object(O.a)(e,null,[{key:"getIdentityProviders",value:function(){return[{id:"inrupt",label:"Inrupt",image:"/viade_es4c/img/inrupt.svg",value:"https://inrupt.net/auth",registerLink:"https://inrupt.net/register",description:"Lorem ipsum dolor sit amet non ipsom dolor"},{id:"solid-community",label:"Solid Community",image:"/viade_es4c//img/Solid.svg",value:"https://solid.community",registerLink:"https://solid.community/register",description:"Lorem ipsum dolor sit non consectetur"}]}}]),e}(),k=n(44),N=(n(964),function(){return o.a.createElement("nav",{className:"nav nav__login"},o.a.createElement(k.a,{className:"text-center",style:{width:"25rem"}},o.a.createElement(k.a.Img,{variant:"top",src:"/viade_es4c/img/logo.svg"}),o.a.createElement(k.a.Body,null,o.a.createElement(k.a.Title,null,"Login of Viade es4c"),o.a.createElement(k.a.Text,null,o.a.createElement(x.ProviderLogin,{selectPlaceholder:"Pick an identity provider",inputPlaholder:"Please enter your WebID or the URL of your identity provider",formButtonText:"Login",btnTxtWebId:"Login with WebId",btnTxtProvider:"Login with Provider",className:"provider-login-component",callbackUri:"".concat(window.location.origin)+/viade_es4c/,errorsText:{unknown:"unknown error",webIdNotValid:"webIdNotValid",emptyProvider:"emptyProvider",emptyWebId:"emptyWebId"},providers:j.getIdentityProviders()})))))}),I=function(){var e=i.useState(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];return i.createElement(i.Fragment,null,i.createElement(w.b,{onClick:function(){r(!0)},color:"orange",outline:!0},"Login"),i.createElement(g.a,{show:n,onHide:function(){r(!1)}},i.createElement(g.a.Body,null,i.createElement(N,null))))},S=n(2),P=n.n(S),R=n(15),T=n(24),C=n(22),F=n(25),_=n(53),L=function(e){var t=e.data,n=e.onSelect,r=e.radioName,a=e.id,c=e.checked;return o.a.createElement("div",null,o.a.createElement("input",{type:"radio",name:r,id:a,onChange:n,value:t.registerLink,checked:c}),o.a.createElement("div",{className:"img-group"},o.a.createElement("img",{src:t.image,alt:t.label}),o.a.createElement("span",{className:"label"},t.label)))},D=n(92),A=(n(965),function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).next=function(){var e=n.state,t=e.canContinue,r=e.register.provider,a=window.location,c=a.protocol,i=a.host;t&&(window.location="".concat(r,"?returnToUrl=").concat(c,"//").concat(i,"/login"))},n.selectProvider=function(e){var t=n.state.register;n.setState({register:Object(_.a)({},t,{provider:e.target.value}),canContinue:!0})},n.onSubmit=function(e){e.preventDefault();var t=n.state,r=t.canContinue,a=t.register.provider,c=window.location,i=c.protocol,o=c.host;r&&(window.location="".concat(a,"?returnToUrl=").concat(i,"//").concat(o,"/login"))},n.state={canContinue:!1,register:{provider:""}},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.canContinue,r=t.register.provider,a=this.props.providers;return o.a.createElement(k.a,{className:"text-center",style:{width:"25rem"}},o.a.createElement(k.a.Img,{variant:"top",src:"/viade_es4c/img/logo.svg"}),o.a.createElement(k.a.Body,null,o.a.createElement(k.a.Title,null,"Make a SOLID account"),o.a.createElement(k.a.Body,null,o.a.createElement(D.a,{onSubmit:this.onSubmit},o.a.createElement("div",null,o.a.createElement("h1",null,"Select Provider"),o.a.createElement("div",{className:"progress-bar"}),o.a.createElement(i.Fragment,null,o.a.createElement("a",{href:"https://solid.inrupt.com/how-it-works",target:"_blank",rel:"noopener noreferrer"},"What is a provider?"),o.a.createElement("ul",null,a.map((function(t){return o.a.createElement("div",{className:"p-item",key:"div-".concat(t.id)},o.a.createElement(L,{data:t,key:t.id,onSelect:e.selectProvider,radioName:"providerRadio",className:"registerRadio",id:"radio-".concat(t.id),checked:t.registerLink===r}))}))))),o.a.createElement(w.b,{className:"btn-solid",onClick:this.next,type:"submit",disabled:!n,color:"orange",outline:!0},"Next")))))}}]),t}(i.Component)),H=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).state={providers:[]},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getIdentityProviders();case 2:t=e.sent,this.setState({providers:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.providers;return o.a.createElement(A,Object.assign({providers:e},this.props))}}]),t}(i.Component),X=function(){var e=i.useState(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];return i.createElement(i.Fragment,null,i.createElement(w.b,{onClick:function(){r(!0)},color:"orange",outline:!0},"Register"),i.createElement(g.a,{show:n,onHide:function(){r(!1)}},i.createElement(g.a.Body,null,i.createElement(H,null))))},M=function(){return o.a.createElement(v.a,{bg:"light",expand:"lg"},o.a.createElement(v.a.Brand,{href:"/viade_es4c"},o.a.createElement(p.a,{src:"/viade_es4c/img/logo.svg",alt:"Viade"})),o.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(b.a,{className:"mr-auto"}),o.a.createElement(b.a,null,o.a.createElement(I,null),o.a.createElement(X,null))))},q=(n(967),n(127)),U=n.n(q),W=n(38),V=n.n(W),B=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Object(y.a)(this,e),this.name=t,this.items=n,this.description=r,this.media=a,this.comments=c},J=function e(t,n,r){Object(y.a)(this,e),this.iri=t,this.author=n,this.publicationTime=r},z=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(y.a)(this,e),this.longitude=t,this.latitude=n,this.elevation=a,this.order=r},G=function e(t,n,r){Object(y.a)(this,e),this.iri=t,this.author=n,this.publicationTime=r},Q=function e(t,n,r,a,c,i,o,s,u){Object(y.a)(this,e),this.title=t,this.license=n,this.actor=r,this.object=a,this.published=c,this.summary=i,this.target=o,this.read=s,this.url=u},K=function(){function e(t){Object(y.a)(this,e),this.route=t,this.str=""}return Object(O.a)(e,[{key:"parse",value:function(){return this.str+="@prefix : <#>.",this.str+="@prefix viade: <http://arquisoft.github.io/viadeSpec/>.",this.str+="@prefix schema: <http://schema.org/>.",this.str+="@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.",this.str+="@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.",this.str+=":myRoute a viade:Route;",this.str+='schema:name "',this.str+=this.route.name,this.str+='";',null!=this.route.description&&""!==this.route.name&&(this.str+='schema:description "',this.str+=this.route.description,this.str+='";'),this.parseitems(),this.str}},{key:"parseitems",value:function(){for(var e=0;e<this.route.items.length;e++)this.str+="viade:point [",null!=this.route.items[e].elevation&&(this.str+="schema:elevation ",this.str+=this.route.items[e].elevation,this.str+=";"),this.str+="schema:latitude ",this.str+=this.route.items[e].latitude,this.str+=";",this.str+="schema:longitude ",this.str+=this.route.items[e].longitude,this.str+=";",this.str+="viade:order ",this.str+=this.route.items[e].order,e===this.route.items.length-1?this.str+="].":this.str+="];"}}]),e}(),Y=n(229),Z=new function e(){var t=this;Object(y.a)(this,e),this.parse=function(){var e=Object(R.a)(P.a.mark((function e(n){var r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Y.newEngine(),"PREFIX schema: <http://schema.org/>\n      PREFIX viade:<http://arquisoft.github.io/viadeSpec/>\n      PREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      \n      SELECT ?lat ?long ?order ?name ?description ?name ?elevation WHERE {\n       ?route a viade:Route.\n       ?route viade:point ?point .\n       ?point schema:latitude ?lat ;\n              schema:longitude ?long ;\n              viade:order ?order.\n      OPTIONAL {?route schema:description ?description.}\n      OPTIONAL {?route schema:name ?name.}\n      OPTIONAL {?point schema:elevation ?elevation.}\n      }",e.next=4,r.query("PREFIX schema: <http://schema.org/>\n      PREFIX viade:<http://arquisoft.github.io/viadeSpec/>\n      PREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      \n      SELECT ?lat ?long ?order ?name ?description ?name ?elevation WHERE {\n       ?route a viade:Route.\n       ?route viade:point ?point .\n       ?point schema:latitude ?lat ;\n              schema:longitude ?long ;\n              viade:order ?order.\n      OPTIONAL {?route schema:description ?description.}\n      OPTIONAL {?route schema:name ?name.}\n      OPTIONAL {?point schema:elevation ?elevation.}\n      }",{sources:[n]});case 4:return a=e.sent,e.next=7,r.resultToString(a,"application/json");case 7:return c=e.sent,i=c.data,e.abrupt("return",new Promise((function(e,n){var r="";i.on("data",(function(e){r+=e})),i.on("end",(function(){e(t.getRoute(JSON.parse(r)))}))})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRoute=function(e){if(e&&e.length){var n=e.map((function(e){return new z(t.parseToFloat(e["?long"]),t.parseToFloat(e["?lat"]),t.parseToFloat(e["?order"]),t.parseToFloat(e["?elevation"]))}));return new B(t.cleanValue(e[0]["?name"]),n,t.cleanValue(e[0]["?description"]))}},this.cleanValue=function(e){if(e)return e.split("^^")[0].replace(/['"]+/g,"")},this.parseToFloat=function(e){if(e){var n=t.cleanValue(e);return parseFloat(n)}}},$=function e(){var t=this;Object(y.a)(this,e),this.execute=function(e){return t.parse(e)},this.parse=function(e){var n=JSON.parse(e),r=t.getItems(n.coordinates);return new B("Unknown",r)},this.getItems=function(e){return e.map((function(e,t){return new z(e[0],e[1],t)}))}},ee=new function e(){var t=this;Object(y.a)(this,e),this.selectParser=function(e){switch(e.name.split(".")[1]){case"json":case"geojson":case"GeoJSON":return new $(e);default:console.log("formato no soportado")}},this.parse=function(e){var n=e,r=t.selectParser(n);return new Promise((function(e,t){var a=new FileReader;a.onload=function(){e(r.execute(a.result))},a.onerror=t,a.readAsText(n)}))}},te=n(141),ne=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.a.fetch(t,{headers:{"Content-Type":"text/turtle"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(R.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.fetch(t,n);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.fetch(t,{method:"DELETE"});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r,a=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.prev=1,r={method:"PUT",headers:{"Content-Type":"text/turtle"},body:n},e.next=5,re(t,r);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,e.abrupt("return",re(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:n}));case 5:throw e.prev=5,e.t0=e.catch(1),e.t0;case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r,a=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.prev=1,e.next=4,ne(t);case 4:return r=e.sent,e.abrupt("return",404===r.status?ce(t,n):null);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(R.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne(t);case 3:if(404!==e.sent.status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,te.default[t];case 8:return n=e.sent,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(R.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.fetch(t);case 3:return n=e.sent,e.abrupt("return",403===n.status||200===n.status);case 7:e.prev=7,e.t0=e.catch(0),alert("Error:ldflex-helper > resourceExists");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue(t);case 3:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,te.default[t]["ldp:inbox"];case 8:if(!(n=e.sent)){e.next=15;break}return e.next=12,n.value;case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=!1;case 16:return r=e.t0,e.abrupt("return",r);case 20:throw e.prev=20,e.t1=e.catch(0),e.t1;case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(R.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.default[t].inbox;case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n.value);case 6:return e.abrupt("return","");case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(e,t){return t.every((function(t){return e.includes(t)}))},he=function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.AppPermission.checkPermissions(t);case 2:return r=e.sent,e.abrupt("return",r.permissions.includes(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r,a,c,i,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.AppPermission.checkPermissions(t);case 2:r=e.sent,a=x.AccessControlList.MODES,c=a.APPEND,i=a.READ,o=a.WRITE,s=a.CONTROL,null!==r&&null!==r.permissions&&pe(r.permissions,[c,i,o,s])||alert(n.title+": "+n.message);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new x.AccessControlList(n,t),e.next=3,r.getPermissions();case 3:if(a=e.sent,c=a.filter((function(e){return null===e.agents})),!(c.filter((function(e){return e.modes.includes(x.AccessControlList.MODES.APPEND)})).length<=0)){e.next=17;break}return e.prev=7,i=[{agents:null,modes:[x.AccessControlList.MODES.APPEND]}],o=new x.AccessControlList(n,t),e.next=12,o.createACL(i);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),e.t0;case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}(),ve=n(34),be=n(40),Ee=new U.a(V.a),ge=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ee.readFolder(t,[]);case 4:n=e.sent,r=n.files.map((function(e){return e.url})),a=0,c=[];case 9:if(!(a<r.length)){e.next=18;break}return e.next=12,Re.parse(r[a]);case 12:(i=e.sent).url=r[a],c.push(i);case 15:a++,e.next=9;break;case 18:return e.abrupt("return",c.sort((function(e,t){return new Date(t.published)-new Date(e.published)})));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.parse(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(R.a)(P.a.mark((function e(t,n,r,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=3;break}return e.abrupt("return",r(n,a));case 3:throw new Error("Error: The opponent does not have an available inbox");case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ye=function(){var e=Object(R.a)(P.a.mark((function e(t){var n,a,c,i,o,s,u,l,m,p;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],a=!0,c=!1,e.prev=4,o=Object(be.a)(t);case 6:return e.next=8,o.next();case 8:return s=e.sent,a=s.done,e.next=12,s.value;case 12:if(u=e.sent,a){e.next=23;break}return m=(l=u).path,e.next=18,r.discoverInbox(m);case 18:(p=e.sent)&&(n=[].concat(Object(ve.a)(n),[Object(_.a)({},l,{path:p})]));case 20:a=!0,e.next=6;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(4),c=!0,i=e.t0;case 29:if(e.prev=29,e.prev=30,a||null==o.return){e.next=34;break}return e.next=34,o.return();case 34:if(e.prev=34,!c){e.next=37;break}throw i;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.abrupt("return",n);case 42:throw e.prev=42,e.t1=e.catch(0),new Error(e.t1);case 45:case"end":return e.stop()}}),e,null,[[0,42],[4,25,29,39],[30,,34,38]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e,t,n){return e.find((function(e){return e.name===t}))||e.find((function(e){return e.name===n}))},je=function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/public/viade/shared_with_me.txt",r=n.split("/profile/card#me")[0]+"/public/viade/shared_with_me.txt",e.next=4,Ee.itemExists(r);case 4:if(e.sent){e.next=9;break}return a={rutas:[t]},e.next=8,Ee.createFile(r,JSON.stringify(a),"text/plain",{});case 8:return e.abrupt("return");case 9:return e.next=11,Ee.readFile(r);case 11:return c=e.sent,(i=JSON.parse(c)).rutas.push(t),e.next=16,Ee.createFile(r,JSON.stringify(i),"text/plain",{});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(R.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.read=!0,n=Te.parse(t),e.next=4,Ee.createFile(t.url,n,"text/turtle",{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=n(191),Ie=n(142),Se=n(523),Pe=new function e(){var t=this;Object(y.a)(this,e),this.setRdfType=function(e){t.rdfType=e},this.do=function(e){return new Promise((function(n,r){t.parseRdf(e).then((function(a){t.prepare(e).then((function(a){t.execute(e,a).then((function(r){if(t.store=e.store,"Array"===e.wanted)n(r);else if("Hash"===e.wanted)n(t.ary2hash(e,r));else if(r.length<1)n("No results!");else if("Value"===e.wanted){var a=Object.keys(r[0])[0];n(r[0][a])}else{var c=t.displayHandler(e,r);n(c)}}),(function(e){return r(e)}))}),(function(e){return r(e)}))}),(function(e){return r(e)}))}))},this.ary2hash=function(e,t){var n,r={};for(n in t)r[(n=t[n])[e.key]]=n;return r},this.parseRdf=function(e){return new Promise((function(n,r){if(!e.data)return n();var a=e.dataType;"undefined"!==typeof document&&(a=t.rdfType),a||(a="text/turtle");try{Ne.a(e.data,e.store,Ie.c("http://example.org/inMemory").uri,a),n()}catch(c){r(c)}}))},this.prepare=function(e){return new Promise((function(t,n){try{t(Se.a(e.query,!1,e.store))}catch(r){n(r)}}))},this.execute=function(e,n){var r=e.rowHandler||t.rowHandler;return new Promise((function(t,a){var c=n.vars,i=[];e.store.query((function(t,n){if("undefined"===typeof n)a("No results.");else{var o=r(e,c,n);o&&i.push(o)}}),{},(function(){t(i)}))}))},this.rowHandler=function(e,t,n){var r,a={};for(r in n){var c=!1,i=r.replace(/^\?/,"");if(t.length){var o=void 0;for(o in t)i!==t[o].label||(c=!0);if(!c)continue}a[i]=n[r].value}return e.rowHandler&&(a=e.rowHandler(a)),a},this.displayHandler=function(e,n){var r=e.wanted?e.wanted:void 0===typeof document?"Text":"HTML";return"Text"===r?t.showText(n):"HTML"===r?t.showHtml(n):void 0},this.showText=function(e){var t,n=Object.keys(e[0]).reverse(),r="\n";for(t in e){var a=void 0;for(a in n)r+="".concat(n[a]," : ").concat(e[t][n[a]],"\n");r+="\n"}return r},this.showHtml=function(e){var t,n,r=Object.keys(e[0]).reverse(),a="<table>",c="";for(t in r)c+="<th>".concat(r[t],"</th>");for(n in a+="<tr>".concat(c,"</tr>"),e){var i="",o=void 0;for(o in r)i+="<td>".concat(e[n][r[o]],"</td>");a+="<tr>".concat(i,"</tr>")}return a+="</table>"},this.runFromLibrary=function(e,n,r){return new Promise((function(a,c){var i={wanted:"Array",data:e,query:'\n    PREFIX : <http://example.org/inMemory#>\n    SELECT ?type ?data ?query WHERE { \n        ?x :name "'.concat(n,'"; :dataFormat ?type; :data ?data; :query ?query . \n    }\n')};t.run(i).then((function(e){var n={wanted:r.wanted,data:e[0].data,query:e[0].query,dataType:e[0].type};t.run(n).then((function(e){a(e)}),(function(e){return c(e)}))}),(function(e){return c(e)}))}),(function(e){return console.log("CH:"+e)}))},this.loadLibrary=function(e){return new Promise((function(n,r){var a={wanted:"Hash",key:"name",data:e,query:"\n    PREFIX : <http://example.org/inMemory#>\n    SELECT ?name ?type ?data ?query WHERE { \n        ?x :name ?name :dataFormat ?type; :data ?data; :query ?query . \n    }\n"};t.run(a).then((function(e){n(e)}),(function(e){return r(e)}))}),(function(e){return console.log("CH: "+e)}))},this.run=function(e){return new Promise((function(n,r){e.store=e.data.length>0?Ie.b():t.store,e.data.match(/^http/)?t.loadFromUrl(e,"data").then((function(e){t.loadSparqlAndDo(e).then((function(e){n(e)}),(function(e){return r(e)}))}),(function(e){return r(e)})):t.loadSparqlAndDo(e).then((function(e){n(e)}),(function(e){return r(e)}))}))},this.loadSparqlAndDo=function(e){return new Promise((function(n,r){e.query.match(/^http/)?t.loadFromUrl(e,"query").then((function(e){t.do(e).then((function(e){n(e)}),(function(e){return r(e)}))}),(function(e){return r(e)})):t.do(e).then((function(e){n(e)}),(function(e){return r(e)}))}))},this.loadFromUrl=function(e,t){var n=e[t];return new Promise((function(r,a){var c=new Ie.a(Ie.b());try{c.load(n).then((function(n){e[t]=n.responseText,r(e)}))}catch(i){a(i)}}))},this.loadFromUrlPlain=function(e){return new Promise((function(t,n){var r=new Ie.a(Ie.b());try{r.load(e).then((function(e){t(e.responseText)}))}catch(a){n(a)}}))}},Re=new(function(){function e(){Object(y.a)(this,e),this.arrayToNotification=function(e){return new Q(e[0].title,e[0].license,e[0].actor,e[0].object,e[0].published,e[0].summary,e[0].target,"true"===e[0].read)}}return Object(O.a)(e,[{key:"parse",value:function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PREFIX terms: <http://purl.org/dc/terms#>\n      PREFIX n0: <https://www.w3.org/ns/activitystreams#>\n      PREFIX schem: <http://schema.org/>\n      PREFIX n1: <https://creativecommons.org/licenses/by-sa/4.0/>\n      PREFIX c: <https://christianpelaez98.solid.community/profile/card#>\n      PREFIX XML: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX ter: <https://www.w3.org/ns/solid/terms#>\n      \n      SELECT ?title ?license ?actor ?object ?published ?summary ?target ?read\n      WHERE {\n      ?notification terms:title ?title;\n      schem:license ?license;\n      n0:actor ?actor;\n      n0:object ?object;\n      n0:published ?published;\n      n0:summary ?summary;\n      n0:target ?target;\n      ter:read ?read.\n      }",n={data:t,query:"PREFIX terms: <http://purl.org/dc/terms#>\n      PREFIX n0: <https://www.w3.org/ns/activitystreams#>\n      PREFIX schem: <http://schema.org/>\n      PREFIX n1: <https://creativecommons.org/licenses/by-sa/4.0/>\n      PREFIX c: <https://christianpelaez98.solid.community/profile/card#>\n      PREFIX XML: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX ter: <https://www.w3.org/ns/solid/terms#>\n      \n      SELECT ?title ?license ?actor ?object ?published ?summary ?target ?read\n      WHERE {\n      ?notification terms:title ?title;\n      schem:license ?license;\n      n0:actor ?actor;\n      n0:object ?object;\n      n0:published ?published;\n      n0:summary ?summary;\n      n0:target ?target;\n      ter:read ?read.\n      }",wanted:"Array"},e.next=4,Pe.run(n).then((function(e){return e}),(function(e){return console.log(e)}));case 4:return r=e.sent,e.abrupt("return",this.arrayToNotification(r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Te=new function e(){var t=this;Object(y.a)(this,e),this.parse=function(e){return console.log(e.title),"@prefix terms: <http://purl.org/dc/terms#>.\n        @prefix as: <https://www.w3.org/ns/activitystreams#>.\n        @prefix schema: <http://schema.org/>.\n        @prefix solid: <https://www.w3.org/ns/solid/terms#>.\n        @prefix xsd: <http://www.w3.org/2001/XMLSchema#>.\n        @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.\n        \n        <> a as:Offer;\n            schema:license <"+t.clearQuotes(e.license)+'>;\n            terms:title "'+e.title+'";\n            as:summary "'+e.description+'";\n            as:actor <'+t.clearQuotes(e.actor)+">;\n            as:target <"+t.clearQuotes(e.target)+">;\n            as:object <"+t.clearQuotes(e.object)+'>;\n            solid:read "'+e.read+'"^^xsd:boolean;\n            as:published "'+e.published+'"^^xsd:dateTime.'},this.clearQuotes=function(e){if(e)return e.replace(/['"]+/g,"")}},Ce=n(166),Fe=n(537),_e=n.n(Fe),Le=(n(1080),new U.a(V.a)),De=function(){var e,t=Object(x.useWebId)(),n=[],r=o.a.createRef(),a=o.a.createRef(),c="",i="",s=function(){var r=Object(R.a)(P.a.mark((function r(a){var o,s,u,l,m,p,h,d,f;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),!t){r.next=38;break}return o=e[0],s=t.substring(0,t.length-16)+"/public/viade/routes/",u=t.substring(0,t.length-16)+"/public/viade/media/",l=s+o.name.substr(0,o.name.indexOf("."))+".ttl",m=ee.parse(o),r.next=9,m.then((function(e){return e}));case 9:(p=r.sent).name=c,p.description=i,r.prev=12,h=0;case 14:if(!(h<n[0].length)){r.next=21;break}return r.next=17,Le.putFile(u+n[0][h].name,n[0][h],n[0][h].type);case 17:n[0][h].name.includes(".mp4")?p.media.push(new G(u,t.substring(0,t.length-16),new Date)):p.media.push(new J(u,t.substring(0,t.length-16),new Date));case 18:h++,r.next=14;break;case 21:r.next=26;break;case 23:r.prev=23,r.t0=r.catch(12),alert("Error en la subida de archivos");case 26:return d=new K(p),f=d.parse(),r.prev=28,r.next=31,Le.createFile(l,f,"text/turtle",{});case 31:r.next=36;break;case 33:r.prev=33,r.t1=r.catch(28),alert("Error uploading files");case 36:r.next=39;break;case 38:alert("You need to be logged in");case 39:case"end":return r.stop()}}),r,null,[[12,23],[28,33]])})));return function(e){return r.apply(this,arguments)}}();return o.a.createElement(D.a,null,o.a.createElement(D.a.Group,{controlId:"formName"},o.a.createElement(D.a.Label,null,"Name:"),o.a.createElement(D.a.Control,{ref:r,onChange:function(){c=r.current.value},type:"text",placeholder:"Enter the name of the route"})),o.a.createElement(D.a.Group,{controlId:"formDescription"},o.a.createElement(D.a.Label,null,"Description:"),o.a.createElement(D.a.Control,{ref:a,onChange:function(){i=a.current.value},as:"textarea",placeholder:"Enter the description of the route"}),o.a.createElement(D.a.Text,{className:"text-muted"},"(Optional)")),o.a.createElement("input",{type:"file",onChange:function(t){e=t.target.files}}),o.a.createElement(_e.a,{withIcon:!0,withPreview:!0,buttonText:"Choose images and videos",onChange:function(e){n.push(e)},imgExtension:[".jpg",".gif",".png",".gif",".mp4"],maxFileSize:5242880}),o.a.createElement(Ce.a,{onClick:s},"Upload"))},Ae=function(){var e=o.a.useState(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.b,{onClick:function(){r(!0)},color:"primary",outline:!0},o.a.createElement(p.a,{className:"button-img",src:"/viade_es4c/img/upload.svg"}),o.a.createElement("p",{className:"font-weight-bold less-margin"},"Upload a route")),o.a.createElement(g.a,{show:n,onHide:function(){r(!1)}},o.a.createElement(g.a.Body,null,o.a.createElement(De,null))))},He=function(){return o.a.createElement(v.a,{bg:"light",expand:"lg"},o.a.createElement(v.a.Brand,{href:"/viade_es4c/"},o.a.createElement(p.a,{src:"/viade_es4c/img/logo.svg",alt:"Viade"})),o.a.createElement(Ae,null),o.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(b.a,{className:"mr-auto"}),o.a.createElement(b.a,null,o.a.createElement(l.c,{exact:!0,to:"/viade_es4c/notifications"},o.a.createElement(p.a,{className:"logout-img",src:"/viade_es4c/img/bell.svg",alt:"Notifications"})),o.a.createElement(l.c,{exact:!0,to:"/viade_es4c/myRoutes",className:"link"},"MyRoutes"),o.a.createElement(l.c,{exact:!0,to:"/viade_es4c/friendsRoutes",className:"link"},"FriendsRoutes"),o.a.createElement(l.c,{exact:!0,to:"/viade_es4c/profile",className:"link"},"Profile"),o.a.createElement(l.c,{exact:!0,to:"/viade_es4c/share",className:"link"},"Share"),o.a.createElement(p.a,{className:"logout-img",src:"/viade_es4c/img/logout.svg",onClick:function(){V.a.logout(),window.location="/viade_es4c"}}))))},Xe=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).state={error:null,errorInfo:null},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?o.a.createElement("div",null,o.a.createElement("h2",null,"Something went wrong."),o.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),o.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),t}(o.a.Component),Me=n(1098),qe=n(1100),Ue=n(1094),We=n(1099),Ve=[],Be=[],Je=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).props.route.items.forEach((function(e){return Be.push([e.latitude,e.longitude])})),Ve=Be[Math.round(Be.length/2)],n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return o.a.createElement(Me.a,{center:Ve,zoom:14},o.a.createElement(qe.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.a.createElement(Ue.a,{position:Be[0]}),o.a.createElement(We.a,{color:"blue",positions:Be}),o.a.createElement(Ue.a,{position:Be[Be.length-1]}))}}]),t}(i.Component),ze=(n(1081),function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).name=e.route.name,n.description=e.route.description,n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"route-uploader"},o.a.createElement("h1",{className:"uploader-text"},this.name),o.a.createElement("p",{className:"uploader-text"},this.description))}}]),t}(i.Component)),Ge=n(250),Qe=(n(1082),function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(T.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(a)))).data=[{src:"/viade_es4c/img/inrupt.svg",date:"Imagen 1",description:"Description"},{src:"/viade_es4c/img/logo.svg",date:"Imagen 2",description:"Description"},{src:"/viade_es4c/img/Solid.svg",date:"Imagen 3",description:"Description"}],n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return o.a.createElement(Ge.a,{interval:5e3},this.data.map((function(e){return o.a.createElement(Ge.a.Item,{key:e.src},o.a.createElement("img",{className:"d-block route-img",src:e.src,alt:e.date}),o.a.createElement(Ge.a.Caption,null,o.a.createElement("h3",null,e.date)))})))}}]),t}(o.a.Component)),Ke=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).data=n.props.route.items,n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"itinerary"},o.a.createElement("h2",null,"Points:"),this.data.map((function(e){return o.a.createElement(k.a,{key:e.latitude+e.longitude},o.a.createElement("p",{className:"coordinate"},e.latitude,", ",e.longitude))})),";")}}]),t}(o.a.Component),Ye=(n(1083),function(e){return o.a.createElement("div",{className:"spacer"},"\xa0")}),Ze=function(){return o.a.createElement(h.a,null,o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12}),o.a.createElement(f.a,{xs:12,md:8,className:"logo-div home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/logo.svg",alt:"Viade"})),o.a.createElement(f.a,{xs:12})),o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12}),o.a.createElement(f.a,{xs:12,md:8,className:"home-div"},o.a.createElement("p",null,"Viade is a Solid project developed by third year students of the University of Oviedo Software Engineering degree in the Software Architecture subject. It offers a route sharing application following the SOLID principles. This is a site where all your data always remains yours. ",o.a.createElement("a",{href:"https://github.com/Arquisoft/viade_es4c"},"Developed by team es4c"),".")),o.a.createElement(f.a,{xs:12})),o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12}),o.a.createElement(f.a,{xs:6,md:2,className:"home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/uploadroute.svg",alt:"Upload a route",className:"fill-image"}),o.a.createElement("p",null,"Upload a new route")),o.a.createElement(f.a,{xs:6,md:2,className:"home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/uploadmedia.svg",alt:"Upload images and videos",className:"fill-image"}),o.a.createElement("p",null,"Complete it with images and videos")),o.a.createElement(f.a,{xs:6,md:2,className:"home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/shareroute.svg",alt:"Share it",className:"fill-image"}),o.a.createElement("p",null,"Share it with whoever you want")),o.a.createElement(f.a,{xs:6,md:2,className:"home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/keepyours.svg",alt:"Keep the ownership of your data",className:"fill-image"}),o.a.createElement("p",null,"And keep the ownership of all this")),o.a.createElement(f.a,{xs:12})),o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement(Ye,null))),o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement(Ye,null))),o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12}),o.a.createElement(f.a,{xs:4,md:2,className:"home-div logo-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/Solid.svg",alt:"Solid",className:"fill-image"})),o.a.createElement(f.a,{xs:4,md:3,className:"logo-div home-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/uniovi.jpg",alt:"Universidad de Oviedo"})),o.a.createElement(f.a,{xs:4,md:2,className:"home-div logo-div"},o.a.createElement(p.a,{src:"/viade_es4c/img/inrupt.svg",alt:"Inrupt",className:"fill-image"})),o.a.createElement(f.a,{xs:12})))},$e=Ze,et=n(1095),tt=n(1101),nt=n(1096),rt=(n(1084),n(251)),at=function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(T.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(a)))).state={profileInput:"",activeProfile:""},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.webId;t&&t!==e.webId&&(this.setState({profileInput:t}),this.setState({activeProfile:t}))}},{key:"viewProfile",value:function(e){this.setState({profileInput:e,activeProfile:e})}},{key:"render",value:function(){var e=this.state.profileInput,t=this.state.activeProfile;return o.a.createElement(h.a,null,o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12,md:12},o.a.createElement(Ye,null))),o.a.createElement(d.a,null,o.a.createElement(f.a,{xs:12}),o.a.createElement(f.a,{xs:12,md:8,className:"profile-card"},o.a.createElement(k.a,{className:"text-center"},o.a.createElement(k.a.Header,null,o.a.createElement(p.a,{src:"/viade_es4c/img/profile/user.png",className:"profile-img"}),o.a.createElement(et.a,{src:"[".concat(t,"].name")})),o.a.createElement(k.a.Body,null,o.a.createElement(k.a.Title,null,o.a.createElement(p.a,{src:"/viade_es4c/img/Solid.svg",className:"profile-img"}),o.a.createElement("a",{href:e},e)),o.a.createElement(rt.a,{defaultActiveKey:"0"},o.a.createElement(k.a,null,o.a.createElement(k.a.Header,null,o.a.createElement(rt.a.Toggle,{as:Ce.a,variant:"link",eventKey:"0"},"Friends")),o.a.createElement(rt.a.Collapse,{eventKey:"0"},o.a.createElement(tt.a,{src:"[".concat(t,"].friends")},(function(e){return o.a.createElement("li",{key:e},o.a.createElement(et.a,{src:"[".concat(e,"].name")},"".concat(e)))}))))),o.a.createElement(k.a.Text,null,o.a.createElement(l.b,{to:"/myRoutes"},o.a.createElement(p.a,{src:"/viade_es4c/img/home/keepyours.svg",className:"profile-img"}),o.a.createElement("h2",null,"My routes")))))),o.a.createElement(f.a,{xs:12})))}}]),t}(o.a.Component),ct=Object(nt.a)(at),it=Object(nt.a)(ct),ot=function(){return o.a.createElement("div",{className:"ErrorImage"},o.a.createElement(l.c,{to:"/"},o.a.createElement("img",{src:"/viade_es4c/img/error404.jpg",alt:"error",height:"50%",width:"50%"})),o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement(l.b,{to:"/"},"Go back Home ")))},st=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).state={routes:[]},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"getRoutes",value:function(){return this.state.routes.map((function(e){return o.a.createElement("div",{className:"text-center"},o.a.createElement(l.b,{key:e.name,to:{pathname:"/viade_es4c/showRoute",state:{route:e}}},o.a.createElement("h3",null,e.name)))}))}},{key:"componentDidMount",value:function(){var e=Object(R.a)(P.a.mark((function e(){var t,n,r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new U.a(V.a),e.next=3,V.a.currentSession();case 3:return n=e.sent.webId,r=n.split("profile")[0]+"public/viade/routes",e.next=7,this.obtainRoutesName(t,r);case 7:a=e.sent,this.obtainRoutes(r,a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"obtainRoutesName",value:function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.itemExists(n);case 2:if(e.sent){e.next=5;break}return console.error("no se escuentra la carpeta viade"),e.abrupt("return",[]);case 5:return e.next=7,t.readFolder(n);case 7:return r=e.sent,a=r.files,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"obtainRoutes",value:function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r,a,c,i,o,s,u,l,m;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!0,c=!1,i=void 0,e.prev=4,o=n[Symbol.iterator]();case 6:if(a=(s=o.next()).done){e.next=16;break}return u=s.value,l=Z.parse(t+"/"+u.name),e.next=11,l.then((function(e){return e}));case 11:m=e.sent,r.push(m);case 13:a=!0,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),c=!0,i=e.t0;case 22:e.prev=22,e.prev=23,a||null==o.return||o.return();case 25:if(e.prev=25,!c){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:this.setState({routes:r});case 31:case"end":return e.stop()}}),e,this,[[4,18,22,30],[23,,25,29]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"container center-block vlsection1"},o.a.createElement("h1",{className:"text-center"},"Rutas"),this.getRoutes()))}}]),t}(o.a.Component),ut=(n(1085),function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).route=n.props.location.state.route,n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"grid-container"},o.a.createElement(Je,{route:this.route,className:"route-map"}),"    ",o.a.createElement(ze,{route:this.route}),"         ",o.a.createElement(Ke,{route:this.route}),"        ",0!==this.route.media.length?o.a.createElement("div",{className:"image-slide"},o.a.createElement(Qe,null)):o.a.createElement("div",null),o.a.createElement(Ye,null))}}]),t}(i.Component)),lt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(T.a)(this,Object(C.a)(t).call(this,e))).state={routes:[]},n}return Object(F.a)(t,e),Object(O.a)(t,[{key:"getRoutes",value:function(){return this.state.routes.map((function(e){return o.a.createElement("div",{className:"text-center"},o.a.createElement(l.b,{key:e.name,to:{pathname:"/viade_es4c/showRoute",state:{route:e}}},o.a.createElement("h3",null,e.name)))}))}},{key:"componentDidMount",value:function(){var e=Object(R.a)(P.a.mark((function e(){var t,n,r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new U.a(V.a),e.next=3,V.a.currentSession();case 3:return n=e.sent.webId,r=n.split("profile")[0]+"public/viade",e.next=7,this.obtainRoutesName(t,r);case 7:a=e.sent,this.obtainRoutes(a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"obtainRoutesName",value:function(){var e=Object(R.a)(P.a.mark((function e(t,n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.prev=1,e.next=4,t.readFile(n+"/shared_with_me.txt");case 4:return r=e.sent,e.abrupt("return",JSON.parse(r));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"obtainRoutes",value:function(){var e=Object(R.a)(P.a.mark((function e(t){var n,r,a,c,i,o,s,u,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n=[],r=!0,a=!1,c=void 0,e.prev=6,i=t.rutas[Symbol.iterator]();case 8:if(r=(o=i.next()).done){e.next=18;break}return s=o.value,u=Z.parse(s),e.next=13,u.then((function(e){return e}));case 13:l=e.sent,n.push(l);case 15:r=!0,e.next=8;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),a=!0,c=e.t0;case 24:e.prev=24,e.prev=25,r||null==i.return||i.return();case 27:if(e.prev=27,!a){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:this.setState({routes:n});case 33:case"end":return e.stop()}}),e,this,[[6,20,24,32],[25,,27,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"container center-block vlsection1"},o.a.createElement("h1",{className:"text-center"},"Friends Routes"),this.getRoutes()))}}]),t}(o.a.Component),mt=function(e){var t=e.webId,n=e.friend,r=e.setFriend,a=e.route,i=e.setRoute,s=e.sendNotification,u=function(){var e=Object(R.a)(P.a.mark((function e(){var r,i,o,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://creativecommons.org/licenses/by-sa/4.0/",e.next=3,c.findUserInboxes([{path:n,name:"Global"}]);case 3:return i=e.sent,o=i[0],u=n,e.next=8,s({title:"Route share",summary:"has shared you a route.",actor:t,object:a,target:u},o.path,x.NotificationTypes.OFFER,r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u()}},o.a.createElement("label",null,"Route's webID:",o.a.createElement("input",{type:"text",name:"route",onChange:function(e){return i(e.target.value)}})),o.a.createElement("label",null,"Insert your friend's webID:",o.a.createElement("input",{type:"text",name:"friend",onChange:function(e){return r(e.target.value)}})),o.a.createElement("input",{type:"submit",value:"Submit"}))},pt=(n(1086),function(e){var t=Object(i.useState)(""),n=Object(E.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),s=Object(E.a)(c,2),u=s[0],l=s[1],m=e.webId,p=Object(x.useNotification)(m).createNotification,h=Object(i.useCallback)(function(){var e=Object(R.a)(P.a.mark((function e(t,n,r,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t,n,r,a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Error: ShareComponent > sendNotification");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[p]);return o.a.createElement("div",null,o.a.createElement("p",null,"."),o.a.createElement("p",null,"."),o.a.createElement("h1",null,"Share Routes"),o.a.createElement(mt,{webId:m,friend:r,setFriend:a,route:u,setRoute:l,sendNotification:h}))}),ht=n(252),dt=function(e){var t=e.notification,n=e.webId,r=e.setSharing,a=e.isSharing,i=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.read){e.next=7;break}return r(!0),e.next=4,c.addRouteSharedWithMe(t.object,n);case 4:return e.next=6,c.markAsRead(t);case 6:r(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(k.a,{style:{margin:"0px 0px 10px 0px",width:"50%"}},o.a.createElement(k.a.Header,null,o.a.createElement("h4",{className:"d-inline-block"},t.title),t.read?null:o.a.createElement(Ce.a,{disabled:a,onClick:function(){return i(t)},className:"float-right d-inline-block"},"Accept Route")),o.a.createElement(ht.a,{variant:"flush"},o.a.createElement(ht.a.Item,null,"From: ",t.actor.toString().substr(8,t.actor.toString().length-40)),o.a.createElement(ht.a.Item,null,"Route: ",t.object.toString().split("/").pop())))},ft=function(e){var t=e.inboxes,n=Object(i.useState)(),r=Object(E.a)(n,2),a=r[0],s=r[1],u=Object(i.useState)(!1),l=Object(E.a)(u,2),m=l[0],p=l[1];return function(){var e=Object(R.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c.fetchNotifications(t[0]);case 5:n=e.sent,s(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}()(),o.a.createElement("div",null,a?a.map((function(t,n){return o.a.createElement(dt,Object.assign({key:n,isSharing:m,setSharing:p,notification:t,setNotifications:s},e))})):null)},vt=function(e){var t=Object(i.useState)([]),n=Object(E.a)(t,2),a=n[0],c=n[1],s=e.webId,u=Object(i.useCallback)(Object(R.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],e.next=4,r.discoverInbox(s);case 4:(n=e.sent)&&(t=[].concat(Object(ve.a)(t),[{path:n,inboxName:"Global",shape:"default"}])),0===t.length&&alert("Error you dont have an inbox"),c(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Error seleccionando inbox");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[s]),l=a.map((function(e){return e.path}));return Object(i.useEffect)((function(){s&&u()}),[s,u]),o.a.createElement("div",{style:{margin:"50px"}},o.a.createElement("h1",null,"Notifications"),o.a.createElement(ft,Object.assign({inboxes:l},e)))},bt=n(167),Et=function(e){var t=e.component,n=Object(bt.a)(e,["component"]),r=Object(x.useWebId)();return o.a.createElement(m.b,Object.assign({},n,{component:function(e){var n=e.history,a=e.location,c=e.match;return o.a.createElement("div",null,r?o.a.createElement(He,{history:n,location:a,match:c,webId:r}):o.a.createElement(M,{history:n,location:a,match:c}),o.a.createElement(t,{history:n,location:a,match:c}))}}))},gt=Object(x.withAuthorization)((function(e){var t=e.component,n=e.webId,r=(e.location,e.history,Object(bt.a)(e,["component","webId","location","history"])),c={message:"The application permissions are not properly set. Please add additional permissions and try again",title:"Error",label:"Learn more",href:"https://solidsdk.inrupt.net/public/general/en/app-permissions.html"};return Object(i.useEffect)((function(){n&&a.checkPermissions(n,c)}),[n,c]),o.a.createElement(m.b,Object.assign({},r,{component:function(e){var r=e.history,a=e.location,c=e.match;return o.a.createElement("div",null,o.a.createElement(He,{history:r,location:a,match:c,webId:n}),o.a.createElement(t,{history:r,location:a,match:c,webId:n}))}}))})),wt=function(){return o.a.createElement(l.a,null,o.a.createElement(i.Fragment,null,o.a.createElement(m.d,null,o.a.createElement(Et,{component:$e,path:"/viade_es4c",exact:!0})," ",o.a.createElement(gt,{component:lt,path:"/viade_es4c/friendsRoutes",exact:!0})," ",o.a.createElement(gt,{component:ut,path:"/viade_es4c/route",exact:!0})," ",o.a.createElement(gt,{component:it,path:"/viade_es4c/profile",exact:!0})," ",o.a.createElement(gt,{component:st,path:"/viade_es4c/myRoutes",exact:!0})," ",o.a.createElement(gt,{component:ut,path:"/viade_es4c/showRoute",exact:!0})," ",o.a.createElement(gt,{component:pt,path:"/viade_es4c/share",exact:!0})," ",o.a.createElement(gt,{component:vt,path:"/viade_es4c/notifications",exact:!0})," ",o.a.createElement(Et,{component:ot,path:"*"})," ")))};var xt=function(){return o.a.createElement(wt,null)};u.a.render(o.a.createElement(Xe,null,o.a.createElement(xt,null)),document.getElementById("root"))},547:function(e,t,n){e.exports=n(1087)},552:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},608:function(e,t){},610:function(e,t){},636:function(e,t){},660:function(e,t){},693:function(e,t){},694:function(e,t){},878:function(e,t){},879:function(e,t){},964:function(e,t,n){},965:function(e,t,n){},967:function(e,t,n){},977:function(e,t){},980:function(e,t){},990:function(e,t){},991:function(e,t){}},[[547,1,2]]]);
//# sourceMappingURL=main.448a1d17.chunk.js.map